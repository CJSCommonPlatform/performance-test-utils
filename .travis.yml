language: java
jdk:
  - oraclejdk8
cache:
  directories:
    - "$HOME/.m2"
before_install:
  - git clone https://github.com/CJSCommonPlatform/travis-settings.git target/travis-settings
install:
  - cp -f $JAVA_HOME/jre/lib/security/cacerts target/travis-settings/cacerts
  - chmod u+w target/travis-settings/cacerts
  - $JAVA_HOME/jre/bin/keytool -import -v -noprompt -storepass changeit -storetype jks -trustcacerts -alias IndigoBlueRoot -file target/travis-settings/ROOT-CA.crt -keystore target/travis-settings/cacerts
script: mvn -Djavax.net.ssl.trustStore=$PWD/target/travis-settings/cacerts -B -C -V -U --settings target/travis-settings/settings.xml verify coveralls:report
after_success:
  - '[[ $TRAVIS_BRANCH == "master" && $TRAVIS_PULL_REQUEST == "false" && $TRAVIS_TAG != release-* ]] && mvn -Djavax.net.ssl.trustStore=$PWD/target/travis-settings/cacerts -DskipTests=true -B -C -V --errors deploy --settings target/travis-settings/settings.xml'
  - '[[ $TRAVIS_TAG == release-* ]] && mvn -Prelease -Djavax.net.ssl.trustStore=$PWD/target/travis-settings/cacerts -DskipTests=true -B -C -V --errors deploy --settings target/travis-settings/settings.xml'
notifications:
  slack:
    secure: "oQCS/op0lvx/zF+MaWmtpqmCxlE5TLVp2vIS4FA2NW+zAi/5B0DiQboqIc5s9u65o1pxrkjUXbBAEHMsmaotPFSJOYR2VA1noLY9X8DPc6xiVtw0cSYod65++YqMdLUwIDegJmfhC7wS71Mg7aE0NKmoC0GQXnspCqCsHZFwPyNGMvciqwPCC/0Wt8ZwfYbasbNC88A1MCcWABZc2t8p529boEFlIXJRlIumk5ZmToQUXVpM7HopYx6R96gNM6p6qNWmauvaZmaoyzifHuN25EhXnVWPRWPxTfphR0q0HPe2YTaYZldER+eSlbw2LjgN6oFcnTlpkh1P5azteFFiAs/7a4iCdoNhjitHXuP5bZdRFIJ6wKP1VFel7usgriddxacOn8L6ftzLG8MxuJBZe+U/6VuGsnTk5gPfQHH54dvdtltBgHBRThRAs/6Oq0O5lbP+yYdCYDvlyHE4mM4/ATDH8lo4hKchcU2HBh0w5QJZWGSYTx38SBcsxm+1MpGykU+qrLtLJp3yEuPZC7X+CNXlnbo4xwwdlPiJc6v0MczL2Cj76rj6PPlE43Z7bouGIn7j78GJwDmI15lD46Tc/eQq+DdspeB7NFzHiJzTsIZGzuhloLkBN/0q1YKeOuizrC2URVJGPXko0zrEuEEO6d/T9NOHXvXOnFZ1Bew396w="
env:
  global:
    - secure: "eKO+mlQY0ZZqTMT1NTXMqXQfVEln4AplSVDIkXe3LbtQ/pCy5X3NvtDNMAI2O4U1SkWkCDNhZYyqbQZud2QMwvWdeKSh7GGJi95EzQAn+Ogp5euykQm0uOVaXhf/8H1fxXatRkjB1uAnw13DollQgQSFrNm6mcp4RliSJMVgB2Pzkeq5JEqmdKjAiGN/cTw/O2mWe387ix+O5f7sVHBQ3F++IwxdfHCn+TraISD1ibBwWFATFya4BiZb/w8cLpjv6CEHYqr75jarPcZm4uzp2eVsKPHKbvDo+7yWgNDL4YS4XQA6/oTFPpsSUm1jIgCAFsZWolkGwbxvjwtSaXaG++IFIRLyZtfiKRLxbx7kh5PMKu4bZAH+0VzO1UF6rNvaPhQ3WNrP3FBZodYUdTlusFh1T+iq3BVvMuHp/0pcfXmpHVuJ5tEAEgBLQiwLn4k6SkKry81Q/RsbsYKwr7k4EUSfA2ydUjSt+YL9dgTPgO70jGDQem2AdLtfIfOQZu1hJPtdV7mmMZnL5a48sY28ft3hUiIjSgA6xOJVc3vlydmePChzdU+iDPGaY3e03j4YL2UF/hnlNZ4Ry2zhXzI79DggI5LRIiCrqzYA57kpl/8To3zhYhpuzPWZltX8IqSvIsKRLWkeDlXLcBmXR2xgMrExeS6tbLZHIyVWMYclPJ0="
    - secure: "dMM02odv3+4xyIHu1zQdBWAH1nkqgns9ITPLnFiJjZ5nHbd9YAtmcQA1t8oBaaLOa3kNGcnjPsEW1JX2o+/9USq67tw915DgRq5JPQHJnixCxiJeJmx1WPX+IWWBazsLD6+iT/0kBCNpnv5Q0+/AfqNJe/SHXeusJZTqatQaP/CxGYXj0SDtlWBKn5ziWsdFPmakaHczgSf2FXBDUaNjKXTpcBbQqyogahIZRSIqZDAD7jsthmeotWEL6BkvBDO1+AUVkoP7YqPkDAlF9WGytyyeoY726Bm25VEuul7vgWeWBvg05089/54vLH7iBYk4SQKB4UYqOtRzEyb4G7UddnsuYqBo8WanCGtcUxGccVVna1jEVB/GSKwwzPscTUlAm19Zusuj1W4UzVMusR4Di5uLZFS8HHeb11AWl4HU0+3nXUdKQL0KFMd0IARWoD2Lr8Z9ej8RPEmAYo0FavlHnD+2SXW3ZyzRVEMjJvUeY2F8FsUWkqjjSSE86/r4eOpq2aeblc4d9n3dIfEQuLRfnuFluK9Ie7FLiVsD2qcxW5dXKImePbkcXjcZUhd3NJwjcitoMlYCK6e9VozKQAxOMbco+8faxiBPuUUrFlDhSaFwgnlzKezsGnu11GqAPGPMTjZNe4XWTzoMPeCa67dNcvyySAPsqBI2MKPPVUxoY48="
